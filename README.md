# Build Configuration Statistics Plugin

## Введение

Добро пожаловать на страницу прототипа плагина для просмотра статистики работы сборок Jenkins. Работа выполнена в рамках ВКР бакалавра. Разработанное решение является прототипом. Этот плагин/модуль требуется для того чтобы отслеживать состояние отдельных конфигураций сборки с течением времени, плагин собирает статистические данные по всей истории сборки и отображает их в виде наглядных диаграмм. Является аналогом модуля Statistics в TeamCity

## Об авторах

Автор и разработчик плагина студент СПбПУ (Политех) Кухто Андрей Денисович. Соавтор и руководитель проекта старший преподавать СПбПУ Пархоменко Владимир Андреевич.

## Запуск плагина

### Для запуска на Windows или Linux локально (запускается вместе с Jenkins, установка Jenkins не требуется) с помощью maven

1. Перейти в папку склонированного плагина
2. Запустить плагин и Jenkins командой:
   
 ```mvn hpi:run -Dport=5000 -Dhudson.security.csrf.GlobalCrumbIssuerConfiguration.DISABLE_CSRF_PROTECTION=true```
 
3. http://localhost:5000/jenkins/ запустить jenkins
4. Создать сборку (freestyle job или pipeline)
5. Запустить сборку
6. Перейти в меню Build Configuration Statistics слева

 ### Для запуска на сервере с установленным Jenkins

1. Перейти в папку склонированного плагина
2. Выполнить команду Maven ```mvn install```
3. Скопировать .hpi в папку /plugins/
4. На запущенном сервере Jenkins перейти в Управление Jenkins и среди доступных плагинов выбрать Build Configuration Statistics и установить
5. Перейти в меню Build Configuration Statistics слева

## Тестирование плагина
Тестирование выполнялось на frontend-maven-plugin (https://github.com/eirslett/frontend-maven-plugin).

Для моделирования ситуации просмотра статистики по метрикам сборки в условиях разных версий продукта, когда вносятся значительные изменения в код, что влечет за собой увеличния, в возможно и уменьшения (в случаи оптимизации) времени сборки продукта, необходимо откатиться к более ранним коммитам.

Для того чтобы откатиться к предыдущим версиям, были проделаны следующие действия:
A. Сделать fork проекта в личный репозиторий.
B. Найти подходящий коммит, в котором были выполнены значительные
изменения (более 500 строк измененного кода).
C. Откатиться до найденного коммита.
D. Создание новой ветки на основе коммита, до которого произошел откат.
E. Отправка ветки в личный удаленный репозиторий на GitHub.

После того как произведен откат до выбранного коммита, необходимо повторить процедуру начиная с коммита, до которого был произведен откат. Процедура была повторена 12 раз т.е. было сгенерировано 12 версий проекта на 12 месяцев года (для генерации сборок на год).

Скрипт формирования "версий" git_handler.py

Для того чтобы отредактировать дату запуска, чтобы увидеть изменения истории сборки был написан скрипт parsrXmlBuilds.py. Время в каждой сборке было отредактировано на каждый месяц за прошедший год.

Пример тестовы данных-сборок в файле build.xml конфигурация сборка, результаты сгенерированных данных 
сборок на скриншоте
genetatedBuild.PNG



